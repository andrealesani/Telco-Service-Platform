<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org">
<link href="css/style.css" rel="stylesheet">
<head>
    <meta charset="UTF-8">
    <title>Telco Service - Confirm</title>
</head>
<body>
<div class="navbar">
    <a class="active" href="GoToHomePage">Home</a>
    <span class="login-status" th:text="'Welcome, ' + (*{user != null}? *{user.username} : 'user')"></span>
</div>

<br>

<div class="container">
    <h1>Confirm your choices</h1>
    <br>
    <span th:unless="${order != null}">The order is empty</span>
    <div th:if="${order != null}">
        <span th:unless="${order.servicePackage.name != null}">Service package name unavailable</span>
        <span th:text="'Service package: '+ ${order.servicePackage.name}"></span><br>
        <span th:unless="${order.validityPeriod.months != null}">Validity period unavailable</span>
        <span th:text="'Validity months: '+ ${order.validityPeriod.months}"></span><br>
        <span th:if="${#sets.isEmpty(order.optionalProducts)}">No optional products selected</span>
        <div th:unless="${#sets.isEmpty(order.optionalProducts)}" th:each="opt : ${order.optionalProducts}">
            <span th:text="'Optional product: '+ ${opt.name}"></span>
            <br>
        </div>
    </div>
    <br><br>
    <form th:unless="${user != null}" action="GoToLoginPage"
          method="GET">
        <label>To proceed with the payment, please log in</label>
        <input type="submit" value="LOGIN">
    </form>
    <form th:if="${user != null}" action="ValidPayment"
          method="GET">
        <input type="hidden" name="order-id" th:value="${order.id}">
        <input type="submit" value="BUY (OK)">
    </form>
    <form th:if="${user != null}" action="InvalidPayment"
          method="GET">
        <input type="hidden" name="order-id" th:value="${order.id}">
        <input type="submit" value="BUY (DENIED)">
    </form>
</div>
</body>
</html>